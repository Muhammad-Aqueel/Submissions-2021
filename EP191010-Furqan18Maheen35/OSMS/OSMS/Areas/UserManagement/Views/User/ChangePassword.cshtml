@model OSMS.Areas.UserManagement.Models.UserModelClass
@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="page-header card">
    <div class="row align-items-end">
        <div class="col-lg-8">
            <div class="page-header-title">
                <i class="feather icon-plus-circle bg-c-blue"></i>
                <div class="d-inline">
                    <h5>Change Password</h5>
                    <span>You can change your password from here!</span>
                </div>
            </div>
        </div>

    </div>
</div>


<div class="card">

    <div class="card-header">
        <form>

            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Old Password :</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control form-control-success" id="OldPassword">
                </div>
            </div>
            <div class="form-group row">
               <label class="col-sm-2 col-form-label">New Password :</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control form-control-success" id="NewPassword">
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-10"></div>
                <div class="col-md-1">
                    <button onclick="UpdatePassword(1, $('#OldPassword').val(), $('#NewPassword').val())" class="btn waves-effect waves-light hor-grd btn-grd-info">Save</button>
                </div>
                <div class="col-md-0.5">
                    <button class="btn waves-effect waves-light hor-grd btn-grd-warning ">Cancel</button>
                </div>                
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
    function UpdatePassword(UserId, OldPassword, NewPassword) {
        if ((OldPassword != null && OldPassword != "") && (NewPassword != null && NewPassword != "")) {
            if (OldPassword != NewPassword) {
                debugger;
                $.ajax({
                    url: '@Url.Action("SavePassword", "User")',
                    type: 'POST',
                    data: {UserId, OldPassword, NewPassword },
                    success: function(response){
                        alert(response);
                    }
                });
            }
            else {
                alert("New password can not be same as old Password.");
            }
        }
        else {
            alert("All fields are required.");
        }
    }
</script>